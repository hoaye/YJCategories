//
//  NSString+YJSpecialCharacter.m
//  YJCategoriesGather
//
//  Created by YJHou on 2014/11/4.
//  Copyright ¬© 2014Âπ¥ ‰æØË∑ÉÂÜõ houmanager@Hotmail.com. All rights reserved.
//

#import "NSString+YJSpecialCharacter.h"

static NSDictionary * yj_s_unicodeToCheatCodes = nil;
static NSDictionary * yj_s_cheatCodesToUnicode = nil;

@implementation NSString (YJSpecialCharacter)

/** ÊòØÂê¶ÂåÖÂê´ÁâπÊÆäemoji */
- (BOOL)yj_isIncludingEmoji{
    BOOL __block result = NO;
    [self enumerateSubstringsInRange:NSMakeRange(0, [self length])
                             options:NSStringEnumerationByComposedCharacterSequences
                          usingBlock: ^(NSString* substring, NSRange substringRange, NSRange enclosingRange, BOOL* stop) {
                              if ([substring _yj_isEmoji]) {
                                  *stop = YES;
                                  result = YES;
                              }
                          }];
    return result;
}

/** Âà†Èô§emojiÂ≠óÁ¨¶ */
- (NSString *)yj_removedEmojiString{
    NSMutableString * __block buffer = [NSMutableString stringWithCapacity:[self length]];
    [self enumerateSubstringsInRange:NSMakeRange(0, [self length])
                             options:NSStringEnumerationByComposedCharacterSequences
                          usingBlock: ^(NSString* substring, NSRange substringRange, NSRange enclosingRange, BOOL* stop) {
                              [buffer appendString:([substring _yj_isEmoji])? @"":substring];
                          }];
    
    return buffer;
}


#pragma mark - Private
- (BOOL)_yj_isEmoji {
    
    if ([self _yj_isFuckEmoji]) { return YES; }
    const unichar high = [self characterAtIndex:0];
    
    // Surrogate pair (U+1D000-1F77F)
    if (0xd800 <= high && high <= 0xdbff) {
        const unichar low = [self characterAtIndex: 1];
        const int codepoint = ((high - 0xd800) * 0x400) + (low - 0xdc00) + 0x10000;
        
        return (0x1d000 <= codepoint && codepoint <= 0x1f77f);
        
        // Not surrogate pair (U+2100-27BF)
    } else {
        return (0x2100 <= high && high <= 0x27bf);
    }
}

- (BOOL)_yj_isFuckEmoji{
    NSArray *fuckArray =@[@"‚≠ê",@"„äôÔ∏è",@"„äóÔ∏è",@"‚¨ÖÔ∏è",@"‚¨ÜÔ∏è",@"‚¨áÔ∏è",@"‚§¥Ô∏è",@"‚§µÔ∏è",@"#Ô∏è‚É£",@"0Ô∏è‚É£",@"1Ô∏è‚É£",@"2Ô∏è‚É£",@"3Ô∏è‚É£",@"4Ô∏è‚É£",@"5Ô∏è‚É£",@"6Ô∏è‚É£",@"7Ô∏è‚É£",@"8Ô∏è‚É£",@"9Ô∏è‚É£",@"„Ä∞",@"¬©¬Æ",@"„ÄΩÔ∏è",@"‚ÄºÔ∏è",@"‚ÅâÔ∏è",@"‚≠ïÔ∏è",@"‚¨õÔ∏è",@"‚¨úÔ∏è",@"‚≠ï",@"Óîä",@"‚¨Ü",@"‚¨á",@"‚¨Ö",@"„äô",@"„äó",@"‚≠ï",@"¬©¬Æ",@"‚§¥",@"‚§µ",@"„Ä∞",@"‚Ä†",@"‚üπ",@"„ÉÑ",@"·É¶",@"¬©",@"¬Æ"];
    //    NSString *test = @"‚≠ê„äôÔ∏è„äóÔ∏è‚¨ÖÔ∏è‚¨ÜÔ∏è‚¨áÔ∏è‚§¥Ô∏è‚§µÔ∏è#Ô∏è‚É£0Ô∏è‚É£1Ô∏è‚É£2Ô∏è‚É£3Ô∏è‚É£4Ô∏è‚É£5Ô∏è‚É£6Ô∏è‚É£7Ô∏è‚É£8Ô∏è‚É£9Ô∏è‚É£„Ä∞¬©¬Æ„ÄΩÔ∏è‚ÄºÔ∏è‚ÅâÔ∏è‚≠ïÔ∏è‚¨õÔ∏è‚¨úÔ∏è‚≠ïÓîä‚¨Ü‚¨á‚¨Ö„äô„äó‚≠ï¬©¬Æ‚§¥‚§µ„Ä∞‚Ä†‚üπ„ÉÑ·É¶";
    //    NSMutableArray *array = [NSMutableArray array];
    //    for (int i = 0;i < [test length]; i++)
    //    {
    //        [array addObject:[test substringWithRange:NSMakeRange(i,1)]];
    //    }
    BOOL result = NO;
    for(NSString *string in fuckArray){
        if ([self isEqualToString:string]) {
            return YES;
        }
    }
    if ([@"\u2b50\ufe0f" isEqualToString:self]) {
        result = YES;
    }
    return result;
}

+ (void)yj_initializeEmojiCheatCodes{
    NSDictionary *forwardMap = @{
                                 @"üòÑ": @":smile:",
                                 @"üòÜ": @[@":laughing:", @":D"],
                                 @"üòä": @":blush:",
                                 @"üòÉ": @[@":smiley:", @":)", @":-)"],
                                 @"‚ò∫": @":relaxed:",
                                 @"üòè": @":smirk:",
                                 @"üòû": @[@":disappointed:", @":("],
                                 @"üòç": @":heart_eyes:",
                                 @"üòò": @":kissing_heart:",
                                 @"üòö": @":kissing_closed_eyes:",
                                 @"üò≥": @":flushed:",
                                 @"üò•": @":relieved:",
                                 @"üòå": @":satisfied:",
                                 @"üòÅ": @":grin:",
                                 @"üòâ": @[@":wink:", @";)", @";-)"],
                                 @"üòú": @[@":wink2:", @":P"],
                                 @"üòù": @":stuck_out_tongue_closed_eyes:",
                                 @"üòÄ": @":grinning:",
                                 @"üòó": @":kissing:",
                                 @"üòô": @":kissing_smiling_eyes:",
                                 @"üòõ": @":stuck_out_tongue:",
                                 @"üò¥": @":sleeping:",
                                 @"üòü": @":worried:",
                                 @"üò¶": @":frowning:",
                                 @"üòß": @":anguished:",
                                 @"üòÆ": @[@":open_mouth:", @":o"],
                                 @"üò¨": @":grimacing:",
                                 @"üòï": @":confused:",
                                 @"üòØ": @":hushed:",
                                 @"üòë": @":expressionless:",
                                 @"üòí": @":unamused:",
                                 @"üòÖ": @":sweat_smile:",
                                 @"üòì": @":sweat:",
                                 @"üò©": @":weary:",
                                 @"üòî": @":pensive:",
                                 @"üòû": @":dissapointed:",
                                 @"üòñ": @":confounded:",
                                 @"üò®": @":fearful:",
                                 @"üò∞": @":cold_sweat:",
                                 @"üò£": @":persevere:",
                                 @"üò¢": @":cry:",
                                 @"üò≠": @":sob:",
                                 @"üòÇ": @":joy:",
                                 @"üò≤": @":astonished:",
                                 @"üò±": @":scream:",
                                 @"üò´": @":tired_face:",
                                 @"üò†": @":angry:",
                                 @"üò°": @":rage:",
                                 @"üò§": @":triumph:",
                                 @"üò™": @":sleepy:",
                                 @"üòã": @":yum:",
                                 @"üò∑": @":mask:",
                                 @"üòé": @":sunglasses:",
                                 @"üòµ": @":dizzy_face:",
                                 @"üëø": @":imp:",
                                 @"üòà": @":smiling_imp:",
                                 @"üòê": @":neutral_face:",
                                 @"üò∂": @":no_mouth:",
                                 @"üòá": @":innocent:",
                                 @"üëΩ": @":alien:",
                                 @"üíõ": @":yellow_heart:",
                                 @"üíô": @":blue_heart:",
                                 @"üíú": @":purple_heart:",
                                 @"‚ù§": @":heart:",
                                 @"üíö": @":green_heart:",
                                 @"üíî": @":broken_heart:",
                                 @"üíì": @":heartbeat:",
                                 @"üíó": @":heartpulse:",
                                 @"üíï": @":two_hearts:",
                                 @"üíû": @":revolving_hearts:",
                                 @"üíò": @":cupid:",
                                 @"üíñ": @":sparkling_heart:",
                                 @"‚ú®": @":sparkles:",
                                 @"‚≠êÔ∏è": @":star:",
                                 @"üåü": @":star2:",
                                 @"üí´": @":dizzy:",
                                 @"üí•": @":boom:",
                                 @"üí¢": @":anger:",
                                 @"‚ùó": @":exclamation:",
                                 @"‚ùì": @":question:",
                                 @"‚ùï": @":grey_exclamation:",
                                 @"‚ùî": @":grey_question:",
                                 @"üí§": @":zzz:",
                                 @"üí®": @":dash:",
                                 @"üí¶": @":sweat_drops:",
                                 @"üé∂": @":notes:",
                                 @"üéµ": @":musical_note:",
                                 @"üî•": @":fire:",
                                 @"üí©": @[@":poop:", @":hankey:", @":shit:"],
                                 @"üëç": @[@":+1:", @":thumbsup:"],
                                 @"üëé": @[@":-1:", @":thumbsdown:"],
                                 @"üëå": @":ok_hand:",
                                 @"üëä": @":punch:",
                                 @"‚úä": @":fist:",
                                 @"‚úå": @":v:",
                                 @"üëã": @":wave:",
                                 @"‚úã": @":hand:",
                                 @"üëê": @":open_hands:",
                                 @"‚òù": @":point_up:",
                                 @"üëá": @":point_down:",
                                 @"üëà": @":point_left:",
                                 @"üëâ": @":point_right:",
                                 @"üôå": @":raised_hands:",
                                 @"üôè": @":pray:",
                                 @"üëÜ": @":point_up_2:",
                                 @"üëè": @":clap:",
                                 @"üí™": @":muscle:",
                                 @"üö∂": @":walking:",
                                 @"üèÉ": @":runner:",
                                 @"üë´": @":couple:",
                                 @"üë™": @":family:",
                                 @"üë¨": @":two_men_holding_hands:",
                                 @"üë≠": @":two_women_holding_hands:",
                                 @"üíÉ": @":dancer:",
                                 @"üëØ": @":dancers:",
                                 @"üôÜ": @":ok_woman:",
                                 @"üôÖ": @":no_good:",
                                 @"üíÅ": @":information_desk_person:",
                                 @"üôã": @":raised_hand:",
                                 @"üë∞": @":bride_with_veil:",
                                 @"üôé": @":person_with_pouting_face:",
                                 @"üôç": @":person_frowning:",
                                 @"üôá": @":bow:",
                                 @"üíè": @":couplekiss:",
                                 @"üíë": @":couple_with_heart:",
                                 @"üíÜ": @":massage:",
                                 @"üíá": @":haircut:",
                                 @"üíÖ": @":nail_care:",
                                 @"üë¶": @":boy:",
                                 @"üëß": @":girl:",
                                 @"üë©": @":woman:",
                                 @"üë®": @":man:",
                                 @"üë∂": @":baby:",
                                 @"üëµ": @":older_woman:",
                                 @"üë¥": @":older_man:",
                                 @"üë±": @":person_with_blond_hair:",
                                 @"üë≤": @":man_with_gua_pi_mao:",
                                 @"üë≥": @":man_with_turban:",
                                 @"üë∑": @":construction_worker:",
                                 @"üëÆ": @":cop:",
                                 @"üëº": @":angel:",
                                 @"üë∏": @":princess:",
                                 @"üò∫": @":smiley_cat:",
                                 @"üò∏": @":smile_cat:",
                                 @"üòª": @":heart_eyes_cat:",
                                 @"üòΩ": @":kissing_cat:",
                                 @"üòº": @":smirk_cat:",
                                 @"üôÄ": @":scream_cat:",
                                 @"üòø": @":crying_cat_face:",
                                 @"üòπ": @":joy_cat:",
                                 @"üòæ": @":pouting_cat:",
                                 @"üëπ": @":japanese_ogre:",
                                 @"üë∫": @":japanese_goblin:",
                                 @"üôà": @":see_no_evil:",
                                 @"üôâ": @":hear_no_evil:",
                                 @"üôä": @":speak_no_evil:",
                                 @"üíÇ": @":guardsman:",
                                 @"üíÄ": @":skull:",
                                 @"üë£": @":feet:",
                                 @"üëÑ": @":lips:",
                                 @"üíã": @":kiss:",
                                 @"üíß": @":droplet:",
                                 @"üëÇ": @":ear:",
                                 @"üëÄ": @":eyes:",
                                 @"üëÉ": @":nose:",
                                 @"üëÖ": @":tongue:",
                                 @"üíå": @":love_letter:",
                                 @"üë§": @":bust_in_silhouette:",
                                 @"üë•": @":busts_in_silhouette:",
                                 @"üí¨": @":speech_balloon:",
                                 @"üí≠": @":thought_balloon:",
                                 @"‚òÄ": @":sunny:",
                                 @"‚òî": @":umbrella:",
                                 @"‚òÅ": @":cloud:",
                                 @"‚ùÑ": @":snowflake:",
                                 @"‚õÑ": @":snowman:",
                                 @"‚ö°": @":zap:",
                                 @"üåÄ": @":cyclone:",
                                 @"üåÅ": @":foggy:",
                                 @"üåä": @":ocean:",
                                 @"üê±": @":cat:",
                                 @"üê∂": @":dog:",
                                 @"üê≠": @":mouse:",
                                 @"üêπ": @":hamster:",
                                 @"üê∞": @":rabbit:",
                                 @"üê∫": @":wolf:",
                                 @"üê∏": @":frog:",
                                 @"üêØ": @":tiger:",
                                 @"üê®": @":koala:",
                                 @"üêª": @":bear:",
                                 @"üê∑": @":pig:",
                                 @"üêΩ": @":pig_nose:",
                                 @"üêÆ": @":cow:",
                                 @"üêó": @":boar:",
                                 @"üêµ": @":monkey_face:",
                                 @"üêí": @":monkey:",
                                 @"üê¥": @":horse:",
                                 @"üêé": @":racehorse:",
                                 @"üê´": @":camel:",
                                 @"üêë": @":sheep:",
                                 @"üêò": @":elephant:",
                                 @"üêº": @":panda_face:",
                                 @"üêç": @":snake:",
                                 @"üê¶": @":bird:",
                                 @"üê§": @":baby_chick:",
                                 @"üê•": @":hatched_chick:",
                                 @"üê£": @":hatching_chick:",
                                 @"üêî": @":chicken:",
                                 @"üêß": @":penguin:",
                                 @"üê¢": @":turtle:",
                                 @"üêõ": @":bug:",
                                 @"üêù": @":honeybee:",
                                 @"üêú": @":ant:",
                                 @"üêû": @":beetle:",
                                 @"üêå": @":snail:",
                                 @"üêô": @":octopus:",
                                 @"üê†": @":tropical_fish:",
                                 @"üêü": @":fish:",
                                 @"üê≥": @":whale:",
                                 @"üêã": @":whale2:",
                                 @"üê¨": @":dolphin:",
                                 @"üêÑ": @":cow2:",
                                 @"üêè": @":ram:",
                                 @"üêÄ": @":rat:",
                                 @"üêÉ": @":water_buffalo:",
                                 @"üêÖ": @":tiger2:",
                                 @"üêá": @":rabbit2:",
                                 @"üêâ": @":dragon:",
                                 @"üêê": @":goat:",
                                 @"üêì": @":rooster:",
                                 @"üêï": @":dog2:",
                                 @"üêñ": @":pig2:",
                                 @"üêÅ": @":mouse2:",
                                 @"üêÇ": @":ox:",
                                 @"üê≤": @":dragon_face:",
                                 @"üê°": @":blowfish:",
                                 @"üêä": @":crocodile:",
                                 @"üê™": @":dromedary_camel:",
                                 @"üêÜ": @":leopard:",
                                 @"üêà": @":cat2:",
                                 @"üê©": @":poodle:",
                                 @"üêæ": @":paw_prints:",
                                 @"üíê": @":bouquet:",
                                 @"üå∏": @":cherry_blossom:",
                                 @"üå∑": @":tulip:",
                                 @"üçÄ": @":four_leaf_clover:",
                                 @"üåπ": @":rose:",
                                 @"üåª": @":sunflower:",
                                 @"üå∫": @":hibiscus:",
                                 @"üçÅ": @":maple_leaf:",
                                 @"üçÉ": @":leaves:",
                                 @"üçÇ": @":fallen_leaf:",
                                 @"üåø": @":herb:",
                                 @"üçÑ": @":mushroom:",
                                 @"üåµ": @":cactus:",
                                 @"üå¥": @":palm_tree:",
                                 @"üå≤": @":evergreen_tree:",
                                 @"üå≥": @":deciduous_tree:",
                                 @"üå∞": @":chestnut:",
                                 @"üå±": @":seedling:",
                                 @"üåº": @":blossum:",
                                 @"üåæ": @":ear_of_rice:",
                                 @"üêö": @":shell:",
                                 @"üåê": @":globe_with_meridians:",
                                 @"üåû": @":sun_with_face:",
                                 @"üåù": @":full_moon_with_face:",
                                 @"üåö": @":new_moon_with_face:",
                                 @"üåë": @":new_moon:",
                                 @"üåí": @":waxing_crescent_moon:",
                                 @"üåì": @":first_quarter_moon:",
                                 @"üåî": @":waxing_gibbous_moon:",
                                 @"üåï": @":full_moon:",
                                 @"üåñ": @":waning_gibbous_moon:",
                                 @"üåó": @":last_quarter_moon:",
                                 @"üåò": @":waning_crescent_moon:",
                                 @"üåú": @":last_quarter_moon_with_face:",
                                 @"üåõ": @":first_quarter_moon_with_face:",
                                 @"üåô": @":moon:",
                                 @"üåç": @":earth_africa:",
                                 @"üåé": @":earth_americas:",
                                 @"üåè": @":earth_asia:",
                                 @"üåã": @":volcano:",
                                 @"üåå": @":milky_way:",
                                 @"‚õÖ": @":partly_sunny:",
                                 @"üéç": @":bamboo:",
                                 @"üíù": @":gift_heart:",
                                 @"üéé": @":dolls:",
                                 @"üéí": @":school_satchel:",
                                 @"üéì": @":mortar_board:",
                                 @"üéè": @":flags:",
                                 @"üéÜ": @":fireworks:",
                                 @"üéá": @":sparkler:",
                                 @"üéê": @":wind_chime:",
                                 @"üéë": @":rice_scene:",
                                 @"üéÉ": @":jack_o_lantern:",
                                 @"üëª": @":ghost:",
                                 @"üéÖ": @":santa:",
                                 @"üé±": @":8ball:",
                                 @"‚è∞": @":alarm_clock:",
                                 @"üçé": @":apple:",
                                 @"üé®": @":art:",
                                 @"üçº": @":baby_bottle:",
                                 @"üéà": @":balloon:",
                                 @"üçå": @":banana:",
                                 @"üìä": @":bar_chart:",
                                 @"‚öæ": @":baseball:",
                                 @"üèÄ": @":basketball:",
                                 @"üõÄ": @":bath:",
                                 @"üõÅ": @":bathtub:",
                                 @"üîã": @":battery:",
                                 @"üç∫": @":beer:",
                                 @"üçª": @":beers:",
                                 @"üîî": @":bell:",
                                 @"üç±": @":bento:",
                                 @"üö¥": @":bicyclist:",
                                 @"üëô": @":bikini:",
                                 @"üéÇ": @":birthday:",
                                 @"üÉè": @":black_joker:",
                                 @"‚úí": @":black_nib:",
                                 @"üìò": @":blue_book:",
                                 @"üí£": @":bomb:",
                                 @"üîñ": @":bookmark:",
                                 @"üìë": @":bookmark_tabs:",
                                 @"üìö": @":books:",
                                 @"üë¢": @":boot:",
                                 @"üé≥": @":bowling:",
                                 @"üçû": @":bread:",
                                 @"üíº": @":briefcase:",
                                 @"üí°": @":bulb:",
                                 @"üç∞": @":cake:",
                                 @"üìÜ": @":calendar:",
                                 @"üì≤": @":calling:",
                                 @"üì∑": @":camera:",
                                 @"üç¨": @":candy:",
                                 @"üìá": @":card_index:",
                                 @"üíø": @":cd:",
                                 @"üìâ": @":chart_with_downwards_trend:",
                                 @"üìà": @":chart_with_upwards_trend:",
                                 @"üçí": @":cherries:",
                                 @"üç´": @":chocolate_bar:",
                                 @"üéÑ": @":christmas_tree:",
                                 @"üé¨": @":clapper:",
                                 @"üìã": @":clipboard:",
                                 @"üìï": @":closed_book:",
                                 @"üîê": @":closed_lock_with_key:",
                                 @"üåÇ": @":closed_umbrella:",
                                 @"‚ô£": @":clubs:",
                                 @"üç∏": @":cocktail:",
                                 @"‚òï": @":coffee:",
                                 @"üíª": @":computer:",
                                 @"üéä": @":confetti_ball:",
                                 @"üç™": @":cookie:",
                                 @"üåΩ": @":corn:",
                                 @"üí≥": @":credit_card:",
                                 @"üëë": @":crown:",
                                 @"üîÆ": @":crystal_ball:",
                                 @"üçõ": @":curry:",
                                 @"üçÆ": @":custard:",
                                 @"üç°": @":dango:",
                                 @"üéØ": @":dart:",
                                 @"üìÖ": @":date:",
                                 @"‚ô¶": @":diamonds:",
                                 @"üíµ": @":dollar:",
                                 @"üö™": @":door:",
                                 @"üç©": @":doughnut:",
                                 @"üëó": @":dress:",
                                 @"üìÄ": @":dvd:",
                                 @"üìß": @":e-mail:",
                                 @"üç≥": @":egg:",
                                 @"üçÜ": @":eggplant:",
                                 @"üîå": @":electric_plug:",
                                 @"‚úâ": @":email:",
                                 @"üí∂": @":euro:",
                                 @"üëì": @":eyeglasses:",
                                 @"üì†": @":fax:",
                                 @"üìÅ": @":file_folder:",
                                 @"üç•": @":fish_cake:",
                                 @"üé£": @":fishing_pole_and_fish:",
                                 @"üî¶": @":flashlight:",
                                 @"üíæ": @":floppy_disk:",
                                 @"üé¥": @":flower_playing_cards:",
                                 @"üèà": @":football:",
                                 @"üç¥": @":fork_and_knife:",
                                 @"üç§": @":fried_shrimp:",
                                 @"üçü": @":fries:",
                                 @"üé≤": @":game_die:",
                                 @"üíé": @":gem:",
                                 @"üéÅ": @":gift:",
                                 @"‚õ≥": @":golf:",
                                 @"üçá": @":grapes:",
                                 @"üçè": @":green_apple:",
                                 @"üìó": @":green_book:",
                                 @"üé∏": @":guitar:",
                                 @"üî´": @":gun:",
                                 @"üçî": @":hamburger:",
                                 @"üî®": @":hammer:",
                                 @"üëú": @":handbag:",
                                 @"üéß": @":headphones:",
                                 @"‚ô•": @":hearts:",
                                 @"üîÜ": @":high_brightness:",
                                 @"üë†": @":high_heel:",
                                 @"üî™": @":hocho:",
                                 @"üçØ": @":honey_pot:",
                                 @"üèá": @":horse_racing:",
                                 @"‚åõ": @":hourglass:",
                                 @"‚è≥": @":hourglass_flowing_sand:",
                                 @"üç®": @":ice_cream:",
                                 @"üç¶": @":icecream:",
                                 @"üì•": @":inbox_tray:",
                                 @"üì®": @":incoming_envelope:",
                                 @"üì±": @":iphone:",
                                 @"üèÆ": @":izakaya_lantern:",
                                 @"üëñ": @":jeans:",
                                 @"üîë": @":key:",
                                 @"üëò": @":kimono:",
                                 @"üìí": @":ledger:",
                                 @"üçã": @":lemon:",
                                 @"üíÑ": @":lipstick:",
                                 @"üîí": @":lock:",
                                 @"üîè": @":lock_with_ink_pen:",
                                 @"üç≠": @":lollipop:",
                                 @"‚ûø": @":loop:",
                                 @"üì¢": @":loudspeaker:",
                                 @"üîÖ": @":low_brightness:",
                                 @"üîç": @":mag:",
                                 @"üîé": @":mag_right:",
                                 @"üÄÑ": @":mahjong:",
                                 @"üì´": @":mailbox:",
                                 @"üì™": @":mailbox_closed:",
                                 @"üì¨": @":mailbox_with_mail:",
                                 @"üì≠": @":mailbox_with_no_mail:",
                                 @"üëû": @":mans_shoe:",
                                 @"üçñ": @":meat_on_bone:",
                                 @"üì£": @":mega:",
                                 @"üçà": @":melon:",
                                 @"üìù": @":memo:",
                                 @"üé§": @":microphone:",
                                 @"üî¨": @":microscope:",
                                 @"üíΩ": @":minidisc:",
                                 @"üí∏": @":money_with_wings:",
                                 @"üí∞": @":moneybag:",
                                 @"üöµ": @":mountain_bicyclist:",
                                 @"üé•": @":movie_camera:",
                                 @"üéπ": @":musical_keyboard:",
                                 @"üéº": @":musical_score:",
                                 @"üîá": @":mute:",
                                 @"üìõ": @":name_badge:",
                                 @"üëî": @":necktie:",
                                 @"üì∞": @":newspaper:",
                                 @"üîï": @":no_bell:",
                                 @"üìì": @":notebook:",
                                 @"üìî": @":notebook_with_decorative_cover:",
                                 @"üî©": @":nut_and_bolt:",
                                 @"üç¢": @":oden:",
                                 @"üìÇ": @":open_file_folder:",
                                 @"üìô": @":orange_book:",
                                 @"üì§": @":outbox_tray:",
                                 @"üìÑ": @":page_facing_up:",
                                 @"üìÉ": @":page_with_curl:",
                                 @"üìü": @":pager:",
                                 @"üìé": @":paperclip:",
                                 @"üçë": @":peach:",
                                 @"üçê": @":pear:",
                                 @"‚úè": @":pencil2:",
                                 @"‚òé": @":phone:",
                                 @"üíä": @":pill:",
                                 @"üçç": @":pineapple:",
                                 @"üçï": @":pizza:",
                                 @"üìØ": @":postal_horn:",
                                 @"üìÆ": @":postbox:",
                                 @"üëù": @":pouch:",
                                 @"üçó": @":poultry_leg:",
                                 @"üí∑": @":pound:",
                                 @"üëõ": @":purse:",
                                 @"üìå": @":pushpin:",
                                 @"üìª": @":radio:",
                                 @"üçú": @":ramen:",
                                 @"üéÄ": @":ribbon:",
                                 @"üçö": @":rice:",
                                 @"üçô": @":rice_ball:",
                                 @"üçò": @":rice_cracker:",
                                 @"üíç": @":ring:",
                                 @"üèâ": @":rugby_football:",
                                 @"üéΩ": @":running_shirt_with_sash:",
                                 @"üç∂": @":sake:",
                                 @"üë°": @":sandal:",
                                 @"üì°": @":satellite:",
                                 @"üé∑": @":saxophone:",
                                 @"‚úÇ": @":scissors:",
                                 @"üìú": @":scroll:",
                                 @"üí∫": @":seat:",
                                 @"üçß": @":shaved_ice:",
                                 @"üëï": @":shirt:",
                                 @"üöø": @":shower:",
                                 @"üéø": @":ski:",
                                 @"üö¨": @":smoking:",
                                 @"üèÇ": @":snowboarder:",
                                 @"‚öΩ": @":soccer:",
                                 @"üîâ": @":sound:",
                                 @"üëæ": @":space_invader:",
                                 @"‚ô†": @":spades:",
                                 @"üçù": @":spaghetti:",
                                 @"üîä": @":speaker:",
                                 @"üç≤": @":stew:",
                                 @"üìè": @":straight_ruler:",
                                 @"üçì": @":strawberry:",
                                 @"üèÑ": @":surfer:",
                                 @"üç£": @":sushi:",
                                 @"üç†": @":sweet_potato:",
                                 @"üèä": @":swimmer:",
                                 @"üíâ": @":syringe:",
                                 @"üéâ": @":tada:",
                                 @"üéã": @":tanabata_tree:",
                                 @"üçä": @":tangerine:",
                                 @"üçµ": @":tea:",
                                 @"üìû": @":telephone_receiver:",
                                 @"üî≠": @":telescope:",
                                 @"üéæ": @":tennis:",
                                 @"üöΩ": @":toilet:",
                                 @"üçÖ": @":tomato:",
                                 @"üé©": @":tophat:",
                                 @"üìê": @":triangular_ruler:",
                                 @"üèÜ": @":trophy:",
                                 @"üçπ": @":tropical_drink:",
                                 @"üé∫": @":trumpet:",
                                 @"üì∫": @":tv:",
                                 @"üîì": @":unlock:",
                                 @"üìº": @":vhs:",
                                 @"üìπ": @":video_camera:",
                                 @"üéÆ": @":video_game:",
                                 @"üéª": @":violin:",
                                 @"‚åö": @":watch:",
                                 @"üçâ": @":watermelon:",
                                 @"üç∑": @":wine_glass:",
                                 @"üëö": @":womans_clothes:",
                                 @"üëí": @":womans_hat:",
                                 @"üîß": @":wrench:",
                                 @"üí¥": @":yen:",
                                 @"üö°": @":aerial_tramway:",
                                 @"‚úà": @":airplane:",
                                 @"üöë": @":ambulance:",
                                 @"‚öì": @":anchor:",
                                 @"üöõ": @":articulated_lorry:",
                                 @"üèß": @":atm:",
                                 @"üè¶": @":bank:",
                                 @"üíà": @":barber:",
                                 @"üî∞": @":beginner:",
                                 @"üö≤": @":bike:",
                                 @"üöô": @":blue_car:",
                                 @"‚õµ": @":boat:",
                                 @"üåâ": @":bridge_at_night:",
                                 @"üöÖ": @":bullettrain_front:",
                                 @"üöÑ": @":bullettrain_side:",
                                 @"üöå": @":bus:",
                                 @"üöè": @":busstop:",
                                 @"üöó": @":car:",
                                 @"üé†": @":carousel_horse:",
                                 @"üèÅ": @":checkered_flag:",
                                 @"‚õ™": @":church:",
                                 @"üé™": @":circus_tent:",
                                 @"üåá": @":city_sunrise:",
                                 @"üåÜ": @":city_sunset:",
                                 @"üöß": @":construction:",
                                 @"üè™": @":convenience_store:",
                                 @"üéå": @":crossed_flags:",
                                 @"üè¨": @":department_store:",
                                 @"üè∞": @":european_castle:",
                                 @"üè§": @":european_post_office:",
                                 @"üè≠": @":factory:",
                                 @"üé°": @":ferris_wheel:",
                                 @"üöí": @":fire_engine:",
                                 @"‚õ≤": @":fountain:",
                                 @"‚õΩ": @":fuelpump:",
                                 @"üöÅ": @":helicopter:",
                                 @"üè•": @":hospital:",
                                 @"üè®": @":hotel:",
                                 @"‚ô®": @":hotsprings:",
                                 @"üè†": @":house:",
                                 @"üè°": @":house_with_garden:",
                                 @"üóæ": @":japan:",
                                 @"üèØ": @":japanese_castle:",
                                 @"üöà": @":light_rail:",
                                 @"üè©": @":love_hotel:",
                                 @"üöê": @":minibus:",
                                 @"üöù": @":monorail:",
                                 @"üóª": @":mount_fuji:",
                                 @"üö†": @":mountain_cableway:",
                                 @"üöû": @":mountain_railway:",
                                 @"üóø": @":moyai:",
                                 @"üè¢": @":office:",
                                 @"üöò": @":oncoming_automobile:",
                                 @"üöç": @":oncoming_bus:",
                                 @"üöî": @":oncoming_police_car:",
                                 @"üöñ": @":oncoming_taxi:",
                                 @"üé≠": @":performing_arts:",
                                 @"üöì": @":police_car:",
                                 @"üè£": @":post_office:",
                                 @"üöÉ": @":railway_car:",
                                 @"üåà": @":rainbow:",
                                 @"üöÄ": @":rocket:",
                                 @"üé¢": @":roller_coaster:",
                                 @"üö®": @":rotating_light:",
                                 @"üìç": @":round_pushpin:",
                                 @"üö£": @":rowboat:",
                                 @"üè´": @":school:",
                                 @"üö¢": @":ship:",
                                 @"üé∞": @":slot_machine:",
                                 @"üö§": @":speedboat:",
                                 @"üå†": @":stars:",
                                 @"üåÉ": @":city-night:",
                                 @"üöâ": @":station:",
                                 @"üóΩ": @":statue_of_liberty:",
                                 @"üöÇ": @":steam_locomotive:",
                                 @"üåÖ": @":sunrise:",
                                 @"üåÑ": @":sunrise_over_mountains:",
                                 @"üöü": @":suspension_railway:",
                                 @"üöï": @":taxi:",
                                 @"‚õ∫": @":tent:",
                                 @"üé´": @":ticket:",
                                 @"üóº": @":tokyo_tower:",
                                 @"üöú": @":tractor:",
                                 @"üö•": @":traffic_light:",
                                 @"üöÜ": @":train2:",
                                 @"üöä": @":tram:",
                                 @"üö©": @":triangular_flag_on_post:",
                                 @"üöé": @":trolleybus:",
                                 @"üöö": @":truck:",
                                 @"üö¶": @":vertical_traffic_light:",
                                 @"‚ö†": @":warning:",
                                 @"üíí": @":wedding:",
                                 @"üáØüáµ": @":jp:",
                                 @"üá∞üá∑": @":kr:",
                                 @"üá®üá≥": @":cn:",
                                 @"üá∫üá∏": @":us:",
                                 @"üá´üá∑": @":fr:",
                                 @"üá™üá∏": @":es:",
                                 @"üáÆüáπ": @":it:",
                                 @"üá∑üá∫": @":ru:",
                                 @"üá¨üáß": @":gb:",
                                 @"üá©üá™": @":de:",
                                 @"üíØ": @":100:",
                                 @"üî¢": @":1234:",
                                 @"üÖ∞": @":a:",
                                 @"üÜé": @":ab:",
                                 @"üî§": @":abc:",
                                 @"üî°": @":abcd:",
                                 @"üâë": @":accept:",
                                 @"‚ôí": @":aquarius:",
                                 @"‚ôà": @":aries:",
                                 @"‚óÄ": @":arrow_backward:",
                                 @"‚è¨": @":arrow_double_down:",
                                 @"‚è´": @":arrow_double_up:",
                                 @"‚¨á": @":arrow_down:",
                                 @"üîΩ": @":arrow_down_small:",
                                 @"‚ñ∂": @":arrow_forward:",
                                 @"‚§µ": @":arrow_heading_down:",
                                 @"‚§¥": @":arrow_heading_up:",
                                 @"‚¨Ö": @":arrow_left:",
                                 @"‚Üô": @":arrow_lower_left:",
                                 @"‚Üò": @":arrow_lower_right:",
                                 @"‚û°": @":arrow_right:",
                                 @"‚Ü™": @":arrow_right_hook:",
                                 @"‚¨Ü": @":arrow_up:",
                                 @"‚Üï": @":arrow_up_down:",
                                 @"üîº": @":arrow_up_small:",
                                 @"‚Üñ": @":arrow_upper_left:",
                                 @"‚Üó": @":arrow_upper_right:",
                                 @"üîÉ": @":arrows_clockwise:",
                                 @"üîÑ": @":arrows_counterclockwise:",
                                 @"üÖ±": @":b:",
                                 @"üöº": @":baby_symbol:",
                                 @"üõÑ": @":baggage_claim:",
                                 @"‚òë": @":ballot_box_with_check:",
                                 @"‚Äº": @":bangbang:",
                                 @"‚ö´": @":black_circle:",
                                 @"üî≤": @":black_square_button:",
                                 @"‚ôã": @":cancer:",
                                 @"üî†": @":capital_abcd:",
                                 @"‚ôë": @":capricorn:",
                                 @"üíπ": @":chart:",
                                 @"üö∏": @":children_crossing:",
                                 @"üé¶": @":cinema:",
                                 @"üÜë": @":cl:",
                                 @"üïê": @":clock1:",
                                 @"üïô": @":clock10:",
                                 @"üï•": @":clock1030:",
                                 @"üïö": @":clock11:",
                                 @"üï¶": @":clock1130:",
                                 @"üïõ": @":clock12:",
                                 @"üïß": @":clock1230:",
                                 @"üïú": @":clock130:",
                                 @"üïë": @":clock2:",
                                 @"üïù": @":clock230:",
                                 @"üïí": @":clock3:",
                                 @"üïû": @":clock330:",
                                 @"üïì": @":clock4:",
                                 @"üïü": @":clock430:",
                                 @"üïî": @":clock5:",
                                 @"üï†": @":clock530:",
                                 @"üïï": @":clock6:",
                                 @"üï°": @":clock630:",
                                 @"üïñ": @":clock7:",
                                 @"üï¢": @":clock730:",
                                 @"üïó": @":clock8:",
                                 @"üï£": @":clock830:",
                                 @"üïò": @":clock9:",
                                 @"üï§": @":clock930:",
                                 @"„äó": @":congratulations:",
                                 @"üÜí": @":cool:",
                                 @"¬©": @":copyright:",
                                 @"‚û∞": @":curly_loop:",
                                 @"üí±": @":currency_exchange:",
                                 @"üõÉ": @":customs:",
                                 @"üí†": @":diamond_shape_with_a_dot_inside:",
                                 @"üöØ": @":do_not_litter:",
                                 @"8‚É£": @":eight:",
                                 @"‚ú¥": @":eight_pointed_black_star:",
                                 @"‚ú≥": @":eight_spoked_asterisk:",
                                 @"üîö": @":end:",
                                 @"‚è©": @":fast_forward:",
                                 @"5‚É£": @":five:",
                                 @"4‚É£": @":four:",
                                 @"üÜì": @":free:",
                                 @"‚ôä": @":gemini:",
                                 @"#‚É£": @":hash:",
                                 @"üíü": @":heart_decoration:",
                                 @"‚úî": @":heavy_check_mark:",
                                 @"‚ûó": @":heavy_division_sign:",
                                 @"üí≤": @":heavy_dollar_sign:",
                                 @"‚ûñ": @":heavy_minus_sign:",
                                 @"‚úñ": @":heavy_multiplication_x:",
                                 @"‚ûï": @":heavy_plus_sign:",
                                 @"üÜî": @":id:",
                                 @"üâê": @":ideograph_advantage:",
                                 @"‚Ñπ": @":information_source:",
                                 @"‚Åâ": @":interrobang:",
                                 @"üîü": @":keycap_ten:",
                                 @"üàÅ": @":koko:",
                                 @"üîµ": @":large_blue_circle:",
                                 @"üî∑": @":large_blue_diamond:",
                                 @"üî∂": @":large_orange_diamond:",
                                 @"üõÖ": @":left_luggage:",
                                 @"‚Üî": @":left_right_arrow:",
                                 @"‚Ü©": @":leftwards_arrow_with_hook:",
                                 @"‚ôå": @":leo:",
                                 @"‚ôé": @":libra:",
                                 @"üîó": @":link:",
                                 @"‚ìÇ": @":m:",
                                 @"üöπ": @":mens:",
                                 @"üöá": @":metro:",
                                 @"üì¥": @":mobile_phone_off:",
                                 @"‚ùé": @":negative_squared_cross_mark:",
                                 @"üÜï": @":new:",
                                 @"üÜñ": @":ng:",
                                 @"9‚É£": @":nine:",
                                 @"üö≥": @":no_bicycles:",
                                 @"‚õî": @":no_entry:",
                                 @"üö´": @":no_entry_sign:",
                                 @"üìµ": @":no_mobile_phones:",
                                 @"üö∑": @":no_pedestrians:",
                                 @"üö≠": @":no_smoking:",
                                 @"üö±": @":non-potable_water:",
                                 @"‚≠ï": @":o:",
                                 @"üÖæ": @":o2:",
                                 @"üÜó": @":ok:",
                                 @"üîõ": @":on:",
                                 @"1‚É£": @":one:",
                                 @"‚õé": @":ophiuchus:",
                                 @"üÖø": @":parking:",
                                 @"„ÄΩ": @":part_alternation_mark:",
                                 @"üõÇ": @":passport_control:",
                                 @"‚ôì": @":pisces:",
                                 @"üö∞": @":potable_water:",
                                 @"üöÆ": @":put_litter_in_its_place:",
                                 @"üîò": @":radio_button:",
                                 @"‚ôª": @":recycle:",
                                 @"üî¥": @":red_circle:",
                                 @"¬Æ": @":registered:",
                                 @"üîÅ": @":repeat:",
                                 @"üîÇ": @":repeat_one:",
                                 @"üöª": @":restroom:",
                                 @"‚è™": @":rewind:",
                                 @"üàÇ": @":sa:",
                                 @"‚ôê": @":sagittarius:",
                                 @"‚ôè": @":scorpius:",
                                 @"„äô": @":secret:",
                                 @"7‚É£": @":seven:",
                                 @"üì∂": @":signal_strength:",
                                 @"6‚É£": @":six:",
                                 @"üîØ": @":six_pointed_star:",
                                 @"üîπ": @":small_blue_diamond:",
                                 @"üî∏": @":small_orange_diamond:",
                                 @"üî∫": @":small_red_triangle:",
                                 @"üîª": @":small_red_triangle_down:",
                                 @"üîú": @":soon:",
                                 @"üÜò": @":sos:",
                                 @"üî£": @":symbols:",
                                 @"‚ôâ": @":taurus:",
                                 @"3‚É£": @":three:",
                                 @"‚Ñ¢": @":tm:",
                                 @"üîù": @":top:",
                                 @"üî±": @":trident:",
                                 @"üîÄ": @":twisted_rightwards_arrows:",
                                 @"2‚É£": @":two:",
                                 @"üàπ": @":u5272:",
                                 @"üà¥": @":u5408:",
                                 @"üà∫": @":u55b6:",
                                 @"üàØ": @":u6307:",
                                 @"üà∑": @":u6708:",
                                 @"üà∂": @":u6709:",
                                 @"üàµ": @":u6e80:",
                                 @"üàö": @":u7121:",
                                 @"üà∏": @":u7533:",
                                 @"üà≤": @":u7981:",
                                 @"üà≥": @":u7a7a:",
                                 @"üîû": @":underage:",
                                 @"üÜô": @":up:",
                                 @"üì≥": @":vibration_mode:",
                                 @"‚ôç": @":virgo:",
                                 @"üÜö": @":vs:",
                                 @"„Ä∞": @":wavy_dash:",
                                 @"üöæ": @":wc:",
                                 @"‚ôø": @":wheelchair:",
                                 @"‚úÖ": @":white_check_mark:",
                                 @"‚ö™": @":white_circle:",
                                 @"üíÆ": @":white_flower:",
                                 @"üî≥": @":white_square_button:",
                                 @"üö∫": @":womens:",
                                 @"‚ùå": @":x:",
                                 @"0‚É£": @":zero:"
                                 };
    
    NSMutableDictionary *reversedMap = [NSMutableDictionary dictionaryWithCapacity:[forwardMap count]];
    [forwardMap enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
        if ([obj isKindOfClass:[NSArray class]]) {
            for (NSString *object in obj) {
                [reversedMap setObject:key forKey:object];
            }
        } else {
            [reversedMap setObject:key forKey:obj];
        }
    }];
    
    @synchronized(self) {
        yj_s_unicodeToCheatCodes = forwardMap;
        yj_s_cheatCodesToUnicode = [reversedMap copy];
    }
}

/** emojiËΩ¨Êç¢  "This is a smiley face :smiley:" -> "This is a smiley face \U0001F604" */
- (NSString *)yj_stringByReplacingEmojiCheatCodesWithUnicode{
    if (!yj_s_cheatCodesToUnicode) {
        [NSString yj_initializeEmojiCheatCodes];
    }
    
    if ([self rangeOfString:@":"].location != NSNotFound) {
        __block NSMutableString *newText = [NSMutableString stringWithString:self];
        [yj_s_cheatCodesToUnicode enumerateKeysAndObjectsUsingBlock:^(NSString *key, id obj, BOOL *stop) {
            [newText replaceOccurrencesOfString:key withString:obj options:NSLiteralSearch range:NSMakeRange(0, newText.length)];
        }];
        return newText;
    }
    
    return self;
}

/** emojiËΩ¨Êç¢  "This is a smiley face \U0001F604" -> "This is a smiley face :smiley:" */
- (NSString *)yj_stringByReplacingEmojiUnicodeWithCheatCodes{
    if (!yj_s_cheatCodesToUnicode) {
        [NSString yj_initializeEmojiCheatCodes];
    }
    
    if (self.length) {
        __block NSMutableString *newText = [NSMutableString stringWithString:self];
        [yj_s_unicodeToCheatCodes enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
            NSString *string = ([obj isKindOfClass:[NSArray class]] ? [obj firstObject] : obj);
            [newText replaceOccurrencesOfString:key withString:string options:NSLiteralSearch range:NSMakeRange(0, newText.length)];
        }];
        return newText;
    }
    return self;
}


@end
